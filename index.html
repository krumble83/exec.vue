
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" type="text/css" href="css.css" media="all">
		<script src="libs/vue.js"></script>
		<script src="libs/svg-pan-zoom.js"></script>
		<script src="libs/color.js"></script>
		<script src="utils.js"></script>
	</head>
	
	<body>
	

	<template id="extooltipTpl">
		<svg
			:x="0"
			:y="0"
			:width="100"
			:height="100"
			:class="classObject"
		>
			<rect width="100%" height="100%" class="exTooltip" />
			<text x="3" y="3">{{text}}</text>
		</svg>
	</template>
	
	
	<template id="titlebarTpl">
		<g class="exTitlebar">
			<rect width="100%" height="40"></rect>
			<text x="100" y="25" stroke="#fff">
				<tspan>{{title}}</tspan>
			</text>
			<slot name="buttons" />
		</g>
	</template>
	
	<template id="titlebarButtonTpl">
		<image width="32" height="32" x="100" y="3" class="undoredo undo" />
	</template>


	<div id="app">
		<ex-worksheet ref="worksheet" class="exWorksheet">
			<ex-titlebar title="toto" slot="front">
				<image width="32" href="undo.png" height="32" x="100" y="3" class="undoredo undo" slot="buttons"></image>
			</ex-titlebar>
		</ex-worksheet>
	</div>
	
	<script>
		
		var n = {
			title: 'Make Array',
			subtitle: 'target is me',
			color: '#78c8fe',
			img: 'function.png',
			x: 300,
			y: 300,
			inputs: [
				{id: 'input1', 
					label: 'editor', 
					color:'#f00',
					editor: {
						ctor: 'ex-pineditor-input',
					}, 
					datatype: 'test'
				},
				{id: 'input2', label: 'inu', color:'#0f0', datatype: 'test'},
			],
			outputs: [
				{id: 'toto', label: 'tet', color:'#fff', datatype: 'test'},
				{id: 'titi', label: 'cohfhrtfhrthrthrhyrl', color:'#fff', datatype: 'test'}
			],
			flags: 'ok',
		};
		
		var n2 = {
			title: 'Split String long titre essai',
			color: '#8000FF',
			img: 'function.png',
			x: 100,
			y: 100,
			inputs: [
				{id: 'toto', label: 'tetttt', color:'#f00', datatype: 'test'},
				{id: 'titi', label: 'cool', color:'#0f0', datatype: 'test'},
			],
			flags: 'ok',
		};

		Utils.Vue.loadVue('common', 'worksheet.mixins', 'link', 'worksheet', 'node.mixins', 'node', 'pin.mixins', 'pin', 'pin.editors', 'app', function(){
			
			var app = new Vue({
				provide: {
					getUid: function(prefix){return 'svg' + ((prefix) ? prefix : '') + id++;}, 
				},
				el: '#app',
				data: {
					title: ''
				},
				methods: {
					addNode: function(data) {this.$refs.worksheet.addNode(data)},
				}
			});
			app.addNode(n);
			setTimeout(function(){
				n.inputs[0].label = "yesssss"
			}, 3000);
			app.addNode(n2);
		
		});

		//console.dir(Vue)
	</script>
	</body>
	
</html>